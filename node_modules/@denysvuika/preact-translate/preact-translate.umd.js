!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("preact"),require("preact/hooks")):"function"==typeof define&&define.amd?define(["exports","preact","preact/hooks"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).preactTranslate={},e.preact,e["preact/hooks"])}(this,(function(e,t,a){"use strict";function n(e,t){return[e,!e||e.endsWith("/")?"":"/",t,".json"].join("")}function o(e,t){let a=e;return t&&Object.keys(t).forEach((e=>{const n=t[e],o=new RegExp(`{${e}}`,"gm");a=a.replace(o,n.toString())})),a}function r(e,t,a){let n=e[t];if(!n)return a;const o=a.split(".");let r="";do{r+=o.shift();const e=n[r];void 0===e||"object"!=typeof e&&o.length?o.length?r+=".":n=a:(n=e,r="")}while(o.length);return n}let l={};const s={root:"",lang:"en",fallbackLang:"en"};const c=t.createContext(null),i="assets",f="en",u="en";e.TranslateContext=c,e.TranslateProvider=e=>{const{t:g,setLang:d,lang:p,isReady:h}=function(e,t){e=Object.assign({},s,e),l=t||l;const[c,i]=a.useState(e.lang),[f,u]=a.useState(l),[g,d]=a.useState(!1),p=a.useCallback((async t=>{if(!f[t]){d(!1);try{const a=n(e.root,t),o=await fetch(a);l[t]=await o.json()}catch(e){console.error(`Failed to load language data for ${t}:`,e)}finally{u({...l}),d(!0)}}}),[f,e.root]);a.useEffect((()=>{(async()=>{await p(e.fallbackLang),await p(c)})()}),[c,p,e.fallbackLang]);const h=a.useMemo((()=>(t,a)=>{if(!f.hasOwnProperty(c))return t;let n=r(f,c,t);return n===t&&c!==e.fallbackLang&&(n=r(f,e.fallbackLang,t)),o(n,a)}),[f,c,e.fallbackLang]);return{lang:c,setLang:i,t:h,isReady:g}}({root:e.root||i,lang:e.lang||f,fallbackLang:e.fallbackLang||u},e.translations);return t.h(c.Provider,{value:{t:g,setLang:d,lang:p,isReady:h}},e.children)},e.format=o,e.getResourceUrl=n,e.getValue=r,Object.defineProperty(e,"__esModule",{value:!0})}));
